<input type="hidden" id="booking-room-id" disabled>

<div class="my-2">
  <div class="input-group">
    <span class="input-group-text">
      หมายเลขห้อง
    </span>
    <input type="text" class="form-control" id="booking-room-number" disabled>
  </div>


</div>

<table class="table table-striped">
  <thead>
    <tr class="align-center">
      <th>วันพัก</th>
      <th class="text-end">ราคาเต็ม</th>
      <th class="text-end">
        ราคามัดจำ 70%
      </th>
    </tr>
  </thead>
  <tbody id="table-booking"></tbody>
</table>

<div class="check-group">
  <div class="check-input-group inline-flex">
    <input type="radio" class="check-input" name="booking-payment" value="cash-payment" id="booking-cash-payment">
    <label class="check-label" for="booking-cash-payment">จ่ายเงินสด</label>
  </div>
  <div class="check-input-group inline-flex">
    <input type="radio" class="check-input" name="booking-payment" value="bank-transfer" id="booking-bank-tranfer">
    <label for="booking-bank-tranfer" class="check-label">ชำระผ่านธนาคาร</label>
  </div>
</div>
<p class="empty-validate" id="validate-booking-payment"></p>
<div class="row">
  <div class="col-xxl-4 col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
    <div class="my-2">
      <label class="form-label bg-dark-pink">ราคา</label>
      <div class="input-group">
        <span class="input-group-text">
          <i class="fa-solid fa-tags"></i>
        </span>
        <input type="number" class="form-control" id="booking-price" disabled placeholder="ราคา">
      </div>
      <p class="empty-validate" id="validate-booking-price"></p>
    </div>
  </div>
  <div class="col-xxl-4 col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
    <div class="my-2">
      <label class="form-label bg-dark-pink">จำนวนวันพัก</label>
      <div class="input-group">
        <span class="input-group-text">
          <i class="fa-solid fa-arrow-down-wide-short"></i>
        </span>
        <input type="number" class="form-control" id="booking-times-count" disabled placeholder="จำนวนวันพัก">
      </div>
      <p class="empty-validate" id="validate-booking-timescount"></p>
    </div>
  </div>
  <div class="col-xxl-4 col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
    <div class="my-2">
      <label class="form-label bg-dark-pink">หน่วย</label>
      <div class="input-group">
        <span class="input-group-text">
          <i class="fa-solid fa-clock"></i>
        </span>
        <select class="form-select" id="booking-unit-times" disabled>
          <option value="" selected>หน่วยเวลา</option>
          <option value="minutes">นาที</option>
          <option value="hours">ชั่วโมง</option>
          <option value="days">วัน</option>
          <option value="weeks">สัปดาห์</option>
          <option value="months">เดือน</option>
          <option value="years">ปี</option>
        </select>
      </div>
      <p class="empty-validate" id="validate-booking-unittimes"></p>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
    <div class="my-2">
      <label class="form-label bg-violet">จำนวนคนที่พัก</label>
      <div class="input-group">
        <span class="input-group-text">
          <i class="fa-solid fa-ruler"></i>
        </span>
        <input type="number" class="form-control" id="booking-person-count" placeholder="ป้อนจำนวนวคนเข้าพัก">
      </div>
      <p class="empty-validate" id="validate-booking-personcount"></p>
    </div>
  </div>
  <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">

    <div class="my-2">
      <label class="form-label bg-blue">เบอร์ติดต่อ</label>
      <div class="input-group">
        <span class="input-group-text">
          <i class="fa-solid fa-phone-volume"></i>
        </span>
        <input type="text" class="form-control txt-none-outline" id="booking-phone" placeholder="ป้อนเบอร์ติดต่อ">
      </div>
      <p class="empty-validate" id="validate-booking-phone"></p>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
    <div class="my-2">
      <label class="form-label bg-darkgray">ชื่อ</label>
      <div class="input-group">
        <span class="input-group-text">
          <i class="fa-solid fa-address-card"></i>
        </span>
        <input type="text" class="form-control" id="booking-fname" placeholder="ป้อนชื่อ">
      </div>
      <p class="empty-validate" id="validate-booking-fname"></p>
    </div>
  </div>
  <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
    <div class="my-2">
      <label class="form-label bg-darkgray">นามสกุล</label>
      <div class="input-group">
        <span class="input-group-text" id="basic-addon1">
          <i class="fa-solid fa-signature"></i>
        </span>
        <input type="text" class="form-control" id="booking-lname" placeholder="ป้อนนามสกุล">
      </div>
      <p class="empty-validate" id="validate-booking-lname"></p>
    </div>
  </div>
</div>



<h5 class="my-2 form-label bg-dark-pink">วันเข้าพัก</h5>
<div class="row my-2">
  <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
    <div class="form-floating my-2">
      <input type="date" class="form-control" id="booking-checkin-date">
      <label for="floatingInput">วันที่</label>
    </div>
  </div>
  <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
    <div class="form-floating my-2">
      <input type="time" class="form-control" id="booking-checkin-times">
      <label for="floatingInput">เวลา</label>
    </div>
  </div>
</div>
<p class="empty-validate" id="validate-booking-checkin"></p>


<h5 class="my-3 form-label bg-dark-pink">วันเข้าพัก</h5>
<div class="row my-2">
  <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
    <div class="form-floating my-2">
      <input type="date" id="booking-checkout-date" class="form-control" disabled>
      <label for="floatingInput">วันที่</label>
    </div>
  </div>
  <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
    <div class="form-floating my-2">
      <input type="time" id="booking-checkout-times" class="form-control" disabled>
      <label for="floatingInput">เวลา</label>
    </div>
  </div>
</div>
<p class="empty-validate" id="validate-booking-checkout"></p>

<script>
  function bookingCheckout() {
    const count = Number.parseInt($('#booking-times-count').val())
    const un = $('#booking-unit-times').val()

    const checkInDate = $('#booking-checkin-date').val()
    const checkInTimes = $('#booking-checkin-times').val()

    if (isNaN(count)) {
      validateformEmpty(true, $('#validate-booking-timescount'), 'กรุณาเลือกจำนวน')
    } else {
      validateformEmpty(false, $('#validate-booking-timescount'), '')
    }

    if (un == '') {
      validateformEmpty(true, $('#validate-booking-unittimes'), 'กรุณาเลือกหน่วย')
    } else {
      validateformEmpty(true, $('#validate-booking-unittimes'), '')
    }
    if (isNaN(count) || un == '') {
      $('#booking-checkin-date').val('')
      $('#booking-checkin-times').val('')
    }

    if (checkInDate != '' && checkInTimes != '' && !isNaN(count) && un != '') {
      const timestamp = new Date(`${checkInDate} ${checkInTimes}`).valueOf()
      let appendDt = 0
      if (un == 'minutes') {
        appendDt = timestamp + (1000 * 60 * count)
      } else if (un == 'hours') {
        appendDt = timestamp + (1000 * 60 * 60 * count)
      } else if (un == 'days') {
        appendDt = timestamp + (1000 * 60 * 60 * 24 * count)
      } else if (un == 'months') {
        appendDt = timestamp + (1000 * 60 * 60 * 60 * 24 * count)
      } else if (un == 'year') {
        appendDt = timestamp + (1000 * 60 * 60 * 60 * 24 * 30 * 12)
      }
      const out = new Date(appendDt)
      const dt = Display.countDate(out.getDate())
      const m = Display.countDate(out.getMonth() + 1)
      const year = out.getFullYear()
      const hour = Display.countDate(out.getHours())
      const minutes = Display.countDate(out.getMinutes())

      const appendDateOut = `${year}-${m}-${dt}`
      const appendTimesOut = `${hour}:${minutes}`
      
      $('#booking-checkout-date').val(appendDateOut)
      $('#booking-checkout-times').val(appendTimesOut)
    }
  }

  $('#booking-checkin-times').change(function() {
    bookingCheckout()
  })
  $('#booking-checkin-date').change(function() {
    bookingCheckout()
  })
</script>